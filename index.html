<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>न्यायग्रन्थाः - Final Textual Tree</title>

  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    body {
      font-family: 'Noto Sans Devanagari', sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 10px;
    }

    svg {
      background: white;
      border: 1px solid #ccc;
      border-radius: 6px;
      display: block;
      margin: auto;
    }

    .link {
      fill: none;
      stroke: #aaa;
      stroke-width: 1.5px;
    }

    .node circle {
      fill: #555;
      r: 4px;
    }

    .node text {
      font-size: 15px;
      fill: #222;
    }

    .clickable {
      fill: blue;
      cursor: pointer;
      text-decoration: underline;
    }
  </style>
</head>

<body>

<svg width="800" height="600"></svg> <!-- Increased page size -->

<script>
// Define tree data
const data = {
  name: "न्यायग्रन्थाः",
  children: [
    {
      name: "न्यायसूत्रभाष्यम्",
      children: [
        { name: "न्यायसूत्राणि", link: "#" },
        { name: "वार्तिकम्", link: "#" },
        { name: "टीका", link: "#" }
      ]
    },
    {
      name: "तत्त्वचिन्तामणिः",
      children: [
        { name: "शब्दखण्डः", link: "#" },
        { name: "सप्तदशखण्डः", link: "#" },
        { name: "आर्षखण्डः", link: "#" }
      ]
    },
    {
      name: "तर्कसङ्ग्रहः",
      children: [
        { name: "प्रस्तावना", link: "#" },
        { name: "सप्तपदार्थ", link: "#" },
        { name: "दृष्टान्तखण्डः", link: "#" }
      ]
    }
  ]
};

const width = 800;
const height = 600;

const svg = d3.select("svg")
  .attr("viewBox", [0, 0, width, height]); // Top-left start

const treeLayout = d3.tree()
  .size([height - 80, width - 200]); // Reduce margin inside layout
const root = d3.hierarchy(data);

treeLayout(root);

// Draw links
svg.selectAll(".link")
  .data(root.links())
  .join("path")
  .attr("class", "link")
  .attr("d", d3.linkVertical()
    .x(d => d.y + 100)  // More margin horizontally
    .y(d => d.x + 40)); // Slight margin vertically

// Draw nodes
const node = svg.selectAll(".node")
  .data(root.descendants())
  .join("g")
  .attr("class", "node")
  .attr("transform", d => `translate(${d.y + 100},${d.x + 40})`);

node.append("circle")
  .attr("r", 4)
  .style("fill", d => d.children ? "#555" : "#999");

node.append("text")
  .attr("dy", 5)
  .attr("x", d => d.children ? -10 : 10)
  .attr("text-anchor", d => d.children ? "end" : "start")
  .attr("class", d => d.data.link ? "clickable" : "")
  .text(d => d.data.name)
  .on("click", (event, d) => {
    if (d.data.link) {
      window.open(d.data.link, "_blank");
    }
  });

</script>

</body>
</html>
